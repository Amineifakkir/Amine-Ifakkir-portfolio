<nav [@animateMenu] class="navbar main-navbar on-top" [class.nav-shadow]="pageYPosition > 0">
  <div class="container nav-container">
    <!-- desktop logo remains inside the island; mobile-only logo shown outside for drawers -->
    <a class="navbar-brand mobile-only" [routerLink]="'inicio'">
      <img src="assets/images/logo.png" alt="Amine Ifakkir" />
    </a>

    <button
      #menuToggle
      class="hamburger"
      type="button"
      aria-label="Toggle menu"
      [attr.aria-expanded]="isMenuOpen"
      [class.open]="isMenuOpen"
      (click)="toggleMenu()"
    >
      <span class="bar"></span>
      <span class="bar"></span>
      <span class="bar"></span>
    </button>

    <nav
      #navLinks
      class="nav-links"
      role="navigation"
      aria-label="Primary"
      [class.open]="isMenuOpen"
    >
      <a class="navbar-brand inside-island" [routerLink]="'inicio'">
        <img src="assets/images/logo.png" alt="Amine Ifakkir" />
      </a>
      <ul class="menu-list">
        <li class="menu-item" [class.is-active]="isActive('about')">
          <button type="button" (click)="analyticsService.sendAnalyticEvent('click_about', 'menu', 'click'); scroll('about')">
            <span class="menu-index">01.</span>
            <span class="menu-label">{{ 'Header.Item1' | translate }}</span>
          </button>
        </li>
        <li class="menu-item" [class.is-active]="isActive('tech')">
          <button type="button" (click)="analyticsService.sendAnalyticEvent('click_stack', 'menu', 'click'); scroll('tech')">
            <span class="menu-index">02.</span>
            <span class="menu-label">{{ 'Header.Item2' | translate }}</span>
          </button>
        </li>
        <li class="menu-item" [class.is-active]="isActive('experience')">
          <button type="button" (click)="analyticsService.sendAnalyticEvent('click_experience', 'menu', 'click'); scroll('experience')">
            <span class="menu-index">03.</span>
            <span class="menu-label">{{ 'Header.Item3' | translate }}</span>
          </button>
        </li>
        <li class="menu-item" [class.is-active]="isActive('projects')">
          <button type="button" (click)="analyticsService.sendAnalyticEvent('click_jobs', 'menu', 'click'); scroll('projects')">
            <span class="menu-index">04.</span>
            <span class="menu-label">{{ 'Header.Item4' | translate }}</span>
          </button>
        </li>
        <li class="menu-item" [class.is-active]="isActive('contact')">
          <button type="button" (click)="analyticsService.sendAnalyticEvent('click_contact', 'menu', 'click'); scroll('contact')">
            <span class="menu-index">05.</span>
            <span class="menu-label">{{ 'Header.Item5' | translate }}</span>
          </button>
        </li>
      </ul>

      <div class="nav-actions">
        <button type="button" class="resume-chip" (click)="downloadCVConst()">
          {{ 'Header.cvBtn' | translate }}
        </button>

        <div class="language-select" ngbDropdown>
          <button
            class="language-trigger"
            id="languageDropdown"
            ngbDropdownToggle
            type="button"
          >
            <img
              *ngIf="languageFormControl.value === 'en'"
              src="https://www.worldometers.info/img/flags/us-flag.gif"
              alt="English"
            />
            <img
              *ngIf="languageFormControl.value === 'gr'"
              src="https://www.worldometers.info/img/flags/gm-flag.gif"
              alt="Deutsch"
            />
            <img
              *ngIf="languageFormControl.value === 'fr'"
              src="https://www.worldometers.info/img/flags/fr-flag.gif"
              alt="French"
            />
            <span class="language-label" *ngIf="languageFormControl.value === 'en'">English</span>
            <span class="language-label" *ngIf="languageFormControl.value === 'gr'">Deutsch</span>
            <span class="language-label" *ngIf="languageFormControl.value === 'fr'">French</span>
            <svg class="language-arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
              <path d="M0 7.33l2.829-2.83 9.175 9.339 9.167-9.339 2.829 2.83-11.996 12.17z"></path>
            </svg>
          </button>

          <div ngbDropdownMenu aria-labelledby="languageDropdown" class="language-menu">
            <button
              type="button"
              class="language-option"
              [class.is-active]="languageFormControl.value === 'en'"
              (click)="selectLanguage('en')"
            >
              <img src="https://www.worldometers.info/img/flags/us-flag.gif" alt="English" />
              <span>English</span>
            </button>
            <button
              type="button"
              class="language-option"
              [class.is-active]="languageFormControl.value === 'gr'"
              (click)="selectLanguage('gr')"
            >
              <img src="https://www.worldometers.info/img/flags/gm-flag.gif" alt="Deutsch" />
              <span>Deutsch</span>
            </button>
            <button
              type="button"
              class="language-option"
              [class.is-active]="languageFormControl.value === 'fr'"
              (click)="selectLanguage('fr')"
            >
              <img src="https://www.worldometers.info/img/flags/fr-flag.gif" alt="French" />
              <span>French</span>
            </button>
          </div>
        </div>
      </div>
    </nav>
  </div>

  <div class="nav-overlay" *ngIf="isMenuOpen" (click)="closeMenu()" aria-hidden="true"></div>
</nav>
